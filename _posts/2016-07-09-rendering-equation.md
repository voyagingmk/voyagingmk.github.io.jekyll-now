---
layout: post_latex
title: 渲染基础理论的介绍
tags: ['math', 'computer graphics' ]
published: true
---


<!--more-->

# 基础概念

## 辐射通量(Flux)

辐射通量(Radiant Flux)，指的是单位时间到达一块平面(或一个局部空间区域)的能量总和。单位是焦耳每秒(joules/second,，J/s)，或瓦特(watts，W)。符号是\\(\\Phi \\)。

一个点光源发射出去的能量大小可以用Flux来描述。其中要注意的是，Flux描述的是单位时间的能量，那么对于点光源来说，Flux只和光源的强弱有关，所以下图的2个圆圈的Flux值是一样的。

![4.png](../images/2016.7/4.png)

## 辐射密度(Irradiance) 和 辐射照度(Radiant Exitence)

辐射密度也叫辐射度。定义了辐射通量后，就可以定义辐射度了，辐射度指的是单位面积**进入**的辐射通量，单位是\\(W\/m\^\{2\}\\)。根据这个定义用符号E表示。

辐射照度和辐射密度是近似的东西，辐射照度指的是单位面积**离开**的辐射通量，单位也是\\(W/m\^\{2\}\\)。用符号M表示。

以上面的点光源来分析，可以知道上图中内圆圈的辐射度比外圆圈的辐射度大，这是因为内圆圈的面积更小而点光源的Flux值恒定，所以内圆圈的E值就大。

用公式表示：

\\[ E = \\frac \{ 点光源辐射通量 \}\{ 球的表面积 \} =  \\frac \{\\Phi\}\{4\\pi r\^\{2\} \} \\]

可见，W恒定，半径r越小，那么辐射度E越大。

当假设光源在无限远处时，可把光源认为是一块平面（这种光源叫方向光）。此时，光源平面与被照射平面存在2种情形：光源平面与被照射平面平行（下图中的A）、光源平面与被照射平面不平行（下图中的B）：

![5.png](../images/2016.7/5.png)

当光源平面与被照射平面平行时，有：

\\[ E\_\{1\} = \\frac \{\\Phi\}\{ L \} \\]

当光源平面与被照射平面不平行时，需要根据平面的法向量和光线方向的夹角θ，先求出\\( L\^\{'\} \\)：

\\[ cos\\theta = \\frac \{ L \}\{ L\^\{'\} \}  \\]

\\[ L\^\{'\}= \\frac \{ L \}\{ cos\\theta \}  \\]

于是得到：

\\[ E\_\{2\} = \\frac \{\\Phi\}\{ L\^\{'\} \} =  \\frac \{\\Phi\}\{ \\frac \{ L \}\{ cos\\theta \}  \} =  \frac \{  \\Phi  cos\\theta  \}\{ L \} \\]

根据这个式子，可以想到，当θ逼近0度时，cosθ等于1，法向量和光线方向平行（上图中的A）；当θ逼近90度时，cosθ等于0，辐射度E为0（光线垂直于法向量了）。


## 立体角(Solid Angle)

理解立体角之前要先理解圆心角。在二维平面上，一个圆的圆弧的微分记为ds(也叫弧微分)，半径为r，则圆心角指的是弧微分与半径的比值:

\\[ d\\theta = \\frac \{ds\}\{r\} \\]

对这个式子做0到2π的积分的话，显然右边的分子变成了圆周长2πr，圆心角为\\( \\frac \{ 2πr \}\{r\} = 2π \\)。

立体角与圆心角非常类似。立体角的ds的含义是球面上的面积微分，而分母需要变成半径r的平方（1[球面度](https://en.wikipedia.org/wiki/Steradian)所对应的立体角所对应的球面表面积为\\(r\^\{2\}\\) ）：

\\[ d\\Omega = \\frac \{ds\}\{r\^\{2\}\} \\]

因为球体表面积等于\\( 4πr\^\{2\} \\)，所以上面的式子积分到整个球体的话，立体角等于4π。

