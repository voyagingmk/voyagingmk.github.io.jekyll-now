---
layout: post_latex
title: Understanding Quaternions 中文翻译《理解四元数》
published: true
tags: ['maths', 'quaternion']
---

原文地址:[http://www.3dgep.com/understanding-quaternions/](http://www.3dgep.com/understanding-quaternions/)


## 正文

在这篇文章中我会尝试用简单的方式去解释四元数的概念，即用可视化的方式解释四元数以及几种对四元数的操作。我将把矩阵、欧拉角和四元数放在一起比较，并解释什么时候该用四元数、什么时候该用欧拉角或矩阵。

### 内容结构

- 介绍
- 复数
	- 复数的加减
	- 复数的系数缩放
	- 复数的积
	- 复数的平方
	- 共轭复数
	- 复数的绝对值
	- 两复数的商
- i的幂
- 复数平面
	- 旋转轴（Rotors)
- 四元数
	- 作为有序数的四元数
	- 四元数的加减
	- 四元数的积
	- 一个真·四元数
	- 四元数的系数缩放
	- 纯四元数
	- 四元数的加法形式
	- 单位四元数
	- 四元数的二进制形式
	- 共轭四元数
	- 四元数规范
	- 四元数规范化
	- 四元数的逆
	- 四元数的点乘
- 旋转
- 四元数的插值
	- SLERP
		- 四元数的差
		- 四元数求幂运算
		- 四元数的分数差
		- 考虑？
	- SQUARD
- 结论
- 下载Demo
- 引用


### 介绍

在计算机图形学中，我们使用转换矩阵来表示空间中的一个位置，以及朝向。一个转换矩阵还可以表示对一个目标的缩放或裁减(?)。	我们可以把转换矩阵想象成一个空间，当你用这个矩阵乘以向量、点（甚至矩阵）， 你就能把向量、点、矩阵转换进这个空间。

在这篇文章中，我不会讨论这个转换函数的细节。你可以查看我前面的文章，文章中描述了转换矩阵的细节。

在这篇文章中，我想要讨论一个可替代的方案，即用四元数来描述空间里的物体的朝向。

四元数的概念是由爱尔兰数学家Sir William Rowan Hamilton发明的（1843年，都柏林）。Hamilton当时正和他的妻子前往爱尔兰皇家研究院，当他从Brougham桥通过皇家运河时，他领悟到了一个激动人心的东西，并立刻把它刻在桥的一个石头上：

\\[ i\^\{2\} = j\^\{2\} = k\^\{2\} = ijk = -1 \\]


![2.jpg](../images/2015.9/2.jpg)

William Rowan Hamilton Plaque on Broome Bridge on the Royal Canal commemorating his discovery of the fundamental formula for quaternion multiplication.

### 复数

在我们能够完全理解四元数之前，我们必须先理解四元数是怎么来的。四元数的根源其实是**复数**。

除了知名的数集（自然数、整数、实数、分数）之外，复数系统引入了一个新的数集——虚数。虚数的发明是为了解决一些特定的无解的方程，例如；
\\[ x\^\{2\} + 1 = 0 \\]
要解决这个等式，必须让\\(x\^\{2\} = -1 \\)，在当然是不行的，因为任意数字的平方都是非负数。

一般而言，数学家是不能忍受一个等式是无解的，于是一个新的术语被发明了，它就是虚数，一个可以解决上面这个等式的数。

虚数有这样的形式：

\\[ i\^\{2\} = -1 \\]

不要为这个术语较真，因为逻辑上这个数是不存在的。只要知道i是一个平方等于-1的东西即可。

虚数的集合可以用\\( \\mathbb\{I\} \\)来表示。

复数的集合\\( \\mathbb\{C\} \\)是一个实数和一个虚数的和，形式如下：

\\[ z = a + bi \ a,b\\in R,\ i\^\{2\} = -1 \\]

可以认为所有实数都是b为0的复数、所有虚数都是a=0的复数。


### 复数的加减

加法：

\\[ (a\_\{1\} + b\_\{1\}i) + (a\_\{2\} + b\_\{2\}i) = (a\_\{1\} + a\_\{2\}) + (b\_\{1\} + b\_\{2\})i \\]

减法：

\\[ (a\_\{1\} + b\_\{1\}i) - (a\_\{2\} + b\_\{2\}i) = (a\_\{1\} - a\_\{2\}) + (b\_\{1\} - b\_\{2\})i \\]

### 复数的系数缩放

\\[ \\lambda (a\_\{1\} + b\_\{1\}i) = \\lambda  a\_\{1\} + \\lambda b\_\{1\}i \\]

### 复数的积

\\[  z\_\{1\} = (a\_\{1\} + b\_\{1\}i) \\]
\\[  z\_\{2\} = (a\_\{2\} + b\_\{2\}i) \\]
\\[  z\_\{1\}z\_\{2\} = (a\_\{1\} + b\_\{1\}i)(a\_\{2\} + b\_\{2\}i) = a\_\{1\}a\_\{2\} + a\_\{1\}b\_\{2\}i + b\_\{1\}a\_\{2\}i+b\_\{1\}b\_\{2\}i\^\{2\} \\]
\\[ z\_\{1\}z\_\{2\} = (a\_\{1\}a\_\{2\} - b\_\{1\}b\_\{2\}) + (a\_\{1\}b\_\{2\} + b\_\{1\}a\_\{2\})i \\]

### 复数的平方


\\[ z = (a + bi) \\]
\\[ z\^\{2\} = (a + bi)(a + bi) \\]
\\[ z\^\{2\} = (a\^\{2\} - b\^\{2\}) + 2abi \\]

### 共轭复数

复数的共轭就是指把复数的虚数部分变成负的。共轭复数的符号是\\(\\bar z\\)或\\(\\z\^\{*\}\\)。

\\[ z = (a + bi) \\]

\\[ z\^\{*\} = (a - bi) \\]

复数和它的共轭复数的乘积是：

\\[ zz\^\{*\} = (a + bi)(a - bi) = a\^\{2\}-abi+abi+b\^\{2\} = a\^\{2\}+b\^\{2\} \\]

### 复数的绝对值

我们使用共轭复数来计算复数的绝对值：


\\[ z = (a + bi) \\]

\\[ |z| = \\sqrt \{zz\^\{*\}\} = \\sqrt \{(a + bi)(a - bi)\} = \\sqrt \{a\^\{2\} + b\^\{2\} \} \\]


### 两复数的商


\\[  z\_\{1\} = (a\_\{1\} + b\_\{1\}i) \\]
\\[  z\_\{2\} = (a\_\{2\} + b\_\{2\}i) \\]
\\[ \\frac \{z\_\{1\}\}\{z\_\{2\}\} = \\frac \{a\_\{1\} + b\_\{1\}i\}\{a\_\{2\} + b\_\{2\}i\} = \\frac \{(a\_\{1\} + b\_\{1\}i)(a\_\{2\} - b\_\{2\}i)\}\{(a\_\{2\} + b\_\{2\}i)(a\_\{2\} - b\_\{2\}i)\} \\]
\\[  = \\frac \{a\_\{1\}a\_\{2\}-a\_\{1\}b\_\{2\}i+b\_\{1\}a\_\{2\}i-b\_\{1\}b\_\{2\}i\^\{2\} \}\{a\_\{2\}\^\{2\} + b\_\{2\}\^\{2\}\} \\]

\\[ = \\frac \{a\_\{1\}a\_\{2\} + b\_\{1\}b\_\{2\} \}\{a\_\{2\}\^\{2\} + b\_\{2\}\^\{2\}\}   + \\frac \{b\_\{1\}a\_\{2\} - a\_\{1\}b\_\{2\} \}\{a\_\{2\}\^\{2\} + b\_\{2\}\^\{2\}\}i \\]

## i的幂

如果i的平方等于-1，那么i的n次幂也应该存在：


\\[ i\^\{0\} = 1 \\]
\\[ i\^\{1\} = i \\]
\\[ i\^\{2\} = -1 \\]
\\[ i\^\{3\} = ii\^\{2\} = -i \\]
\\[ i\^\{4\} = i\^\{2\}i\^\{2\} = 1 \\]
\\[ i\^\{5\} = ii\^\{4\} = i \\]
\\[ i\^\{6\} = ii\^\{5\} = i\^\{2\} = -1 \\]

如果按照这个顺序写下去，会出现这样一个模式：
(1,i,-1,-i,1,...)

一个类似的模式也出现在递增的负数幂：

\\[ i\^\{0\} = 1 \\]
\\[ i\^\{-1\} = -i \\]
\\[ i\^\{-2\} = -1 \\]
\\[ i\^\{-3\} = i \\]
\\[ i\^\{-4\} = 1 \\]
\\[ i\^\{-5\} = -i \\]
\\[ i\^\{-6\} = -1 \\]

你可能已经在数学里头见过类似的模式，但是是以（x,y,-x,-y,x,...)的形式，这是在2D笛卡尔平面对一个点逆时针旋转90度时生成的；（x,-y,-x,y,x,...)则是在2D笛卡尔平面对一个点顺时针旋转90度时生成的。


![3.png](../images/2015.9/3.png)


## 复数平面
### 旋转轴（Rotors)
## 四元数
