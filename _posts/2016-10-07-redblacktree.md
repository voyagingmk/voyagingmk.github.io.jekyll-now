---
layout: post_latex
title: 红黑树原理分析
tags: ['data structure' ]
published: true
---



我一直觉得那些著名的数据结构，都是工程设计和数学的完美结合。

所有的数据**结构**都是被精心**设计**出来的，此所谓工程设计。但是，既然叫精心设计，就意味着有一套准则，这个准则就是数学。

没有数学基础的数据结构都是耍流氓。

红黑树拥有精巧的结构设计和强大的数学基础，但我总觉得有点过于复杂，故写本文来回顾下并重新思考，希望能有新的感悟。


<!--more-->

# 红黑树的定义

红黑树是一种特殊的二叉树，每个节点有颜色bit，要么红色要么黑色。红黑树必然满足以下4个**结构上**的性质：

1. 根节点是黑色

2. 叶子节点（NULL）视为黑色节点

3. 如果一个节点是红色，那么它的2个孩子节点都是黑色

4. 对于每条从根节点出发、并到达叶子节点的路径，路径上黑色节点的数量一致（叶子节点也计算在内）

这4个性质，稍微想一遍就知道是没有矛盾的。但是没有矛盾只是第一步，接着就是证明这4个性质为什么能使得红黑树变成牛逼的树。

牛逼指的是这棵树很**平衡**。平衡的定义是：设二叉树的节点数目为n，那么树的高度h和n必须满足：\\( h = O(\\log \_\{2\}n)\\)。这个就是要证明的东西。


# 红黑树的证明

## 定义BH(x)
首先需要定义一个函数BH(x)：x指红黑树的一个节点，BH(x)指这个x节点到叶子节点的路径上黑色节点的数量。

根据上面的性质4，可以知道无论x走哪条路径到达叶子节点，BH(x)都一样。

## 2个引理

### 引理1：对于以节点x为根节点的子树，子树的总的节点数量至少为\\( 2\^\{BH(x)\} - 1  \\)



### 引理2：设树的高度为h，那么有\\( BH(root) \\leq \\frac \{h\} \{2\} \\)


http://www.dgp.toronto.edu/people/JamesStewart/378notes/16redBlack/